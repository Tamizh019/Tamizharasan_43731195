show databases;
use placement;

 ## --CREATING PARENT TABLE --
create table Category1(
cid int primary key,
cname varchar(30),
cdesc varchar(40)
);

 ## --TO ADD FOREIGN KEY AND CASCADE --
create table Product1(
pid int primary key,
pname varchar(30),
cid int not null,
foreign key(cid) references category1 (cid)  #FOREIGN KEY ADDED
on delete cascade  #CASCADE FOR DELETE ADDED
on update cascade  #CASCADE FOR UPDATE
);

drop table product1;
drop  table category1;

desc product1;
desc category1;

insert into category1 values ( 1,'Tech','About tech products added'),(2,'Non-tech','Non tech things'),(3,'Books','About educational Things'),(4,'Food','About Eatables');
select * from category1;
insert into product1 values (1,'Oneplus 11R',1),(2,'Burger',4),(3,'Harry potter BOOKS',3),(4,'Cleaning MOP',2),(5,'Redmi 12 5G',1),(6,'Chicken Biriyani',4),(7,'Mat',2);
select * from product1;

 ## --CHECKING CASCADE FOR UPDATE AND DELETE --
 delete from category1 where cid=1;
 select * from category1; 
 select * from product1; #WORKS Cid =1 Gets deleted on both tables ..
 
 update category1 set cid=1 where cid=4;
 select * from category1;
 select * from product1; #WORKS Cid =4 Gets updated on both tables ..
 
 
  ## --FOREIGN KEY FOR CONNECTING 3 TABLES --
  
   ## --PARENT TABLE --
  create table College(
  cid int primary key,
  cname varchar(30) not null
  );
  
   ## --BOTH PARENT AND CHILD --
   create table department(
  did int primary key,
  dname varchar(30) not null,
  cid int ,
  foreign key(cid) references college (cid) #foreign key for table college and department
  on update cascade
  on delete cascade
  );
  
   ## --ONLY CHILD --
   create table student1(
  sid int primary key,
  sname varchar(30) not null,
  did int ,
  foreign key(did) references department (did) #foreign key for table department and student1
  on update cascade
  on delete cascade
  );
  
  desc college;
  desc department;
  desc student1;
  
  insert into college values 
  ( 1,'Sathyabama University'),
  ( 2,'St.Joseph College'),
  ( 3,'Anna University'),
  ( 4,'Panimalar University');
  select * from college;
  
  insert into department values 
  ( 101,'CSE',1),
  ( 102,'EEE',1),
  ( 103,'Aeronautical ',2),
  ( 104,'ECE',3),
  ( 105,'AI',3);
  select * from department;
  
  insert into student1 values 
  ( 1001,'Tamizh',101),
  ( 1002,'Sanjay',101),
  ( 1003,'Harjith',105),
  ( 1004,'Amrit',104),
  ( 1005,'Arjun',103);
  select * from student1;
  
   ## --CHECKING CASCADE FOR DEPARTMENT --   
   delete from department where did=103;
   select * from department;
   select * from student1; #works (arjun gets deleted in student1 table)
   
   update department set did=106 where did=101;
   select * from student1; #works (changed did 101 --> 106)
   
   ## --USING ALIAS NAME --  
   select dname as department_name from department;
   select cid as College_id from department;
   select sname as student_name from student1;
   
   ## --USING LIKE --
   select * from student1;
   select * from student1 where sname like '_am_%'; ## It will show only Tamizh !
   select * from student1 where did like '1_6';
   select * from student1 where sid like '%3';
   select * from student1 where sname like 'S%';
   
   ## --USING VIEW COMMAND --
   create view id_check as select * from student1 where sid > 1002 and 1004>=sid ;
   select * from id_check; # Works and shows o/p as 1003 and 1004....
   drop view id_check;
	